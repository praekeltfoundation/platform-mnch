{"name":"HelpCentre: Agent Greeting","description":"Default description","uuid":"1558176d-4e4e-4625-b9b4-93c77c1bac92","resources":[{"values":[{"value":"@substituted_msg","modes":["RICH_MESSAGING"],"content_type":"TEXT","mime_type":"text/plain","language_id":"d776d8c5-66a8-4d35-b248-f2d31c8f3abc"}],"uuid":"a27433e8-800b-4aae-8002-0244b61fbe8d"},{"values":[{"value":"Rerouting this chat as its unassigned","modes":["RICH_MESSAGING"],"content_type":"TEXT","mime_type":"text/plain","language_id":"d776d8c5-66a8-4d35-b248-f2d31c8f3abc"}],"uuid":"29f81bc6-5fbd-4dfd-b54b-07ba7ba4c8a7"},{"values":[{"value":"Agent assigned to this chat = @chat.assigned_to.name","modes":["RICH_MESSAGING"],"content_type":"TEXT","mime_type":"text/plain","language_id":"d776d8c5-66a8-4d35-b248-f2d31c8f3abc"}],"uuid":"c233bca0-2919-41c5-b847-4c4a26936b31"},{"values":[{"value":"No agent assigned to this chat","modes":["RICH_MESSAGING"],"content_type":"TEXT","mime_type":"text/plain","language_id":"d776d8c5-66a8-4d35-b248-f2d31c8f3abc"}],"uuid":"81a746cb-2048-4e0d-886f-80c0e37858d3"}],"flows":[{"label":null,"name":"stack","blocks":[{"label":null,"name":"search","type":"Io.Turn.Webhook","config":{"timeout":5000,"mode":"sync","body":null,"query":[["slug","plat_help_agent_greeting"]],"url":"https://content-repo-api-qa.prk-k8s.prd-p6t.org/api/v2/pages/","headers":[["Authorization","Token @global.settings.contentrepo_qa_token"]],"method":"GET","cache_ttl":60000},"tags":[],"uuid":"c350b218-00f2-516c-89ea-a984ad8e2f72","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"search","config":{},"test":"","uuid":"f761fdbf-6ddd-438b-bb3e-1c31378f7645","destination_block":"002fc7de-ea1c-5f1e-b630-eb9e9b8e32af","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"meta":{"column":3,"line":33},"type":"webhook","webhook":{}},"index":0}}}}}},{"label":null,"name":"page_id","type":"Core.Case","config":{},"tags":[],"uuid":"002fc7de-ea1c-5f1e-b630-eb9e9b8e32af","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"search.body.results[0].id","config":{},"test":"","uuid":"e665fb60-efbc-4454-9f0d-09fa474314fd","destination_block":"8133fdfb-b4be-5fe5-b344-981733a48631","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"expression":{},"meta":{"column":3,"line":42},"type":"expression"},"index":0}}}}}},{"label":null,"name":"page","type":"Io.Turn.Webhook","config":{"timeout":5000,"mode":"sync","body":null,"query":[["whatsapp","true"]],"url":"https://content-repo-api-qa.prk-k8s.prd-p6t.org/api/v2/pages/@page_id/","headers":[["Authorization","Token @global.settings.contentrepo_qa_token"]],"method":"GET","cache_ttl":60000},"tags":[],"uuid":"8133fdfb-b4be-5fe5-b344-981733a48631","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"page","config":{},"test":"","uuid":"bfbcb6d3-16ee-484d-80f9-bc5fe5244ee4","destination_block":"2bfb8da8-3095-5ae8-b6be-6f5d2f299066","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"meta":{"column":3,"line":44},"type":"webhook","webhook":{}},"index":0}}}}}},{"label":null,"name":"greeting_msg","type":"Core.Case","config":{},"tags":[],"uuid":"2bfb8da8-3095-5ae8-b6be-6f5d2f299066","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"page.body.body.text.value.message","config":{},"test":"","uuid":"5a652b64-5e4e-4acd-95e8-a2fca71f9d37","destination_block":"5950c048-d5d0-5117-b188-2320b644c0e1","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"expression":{},"meta":{"column":3,"line":53},"type":"expression"},"index":0}}}}}},{"label":null,"name":"substituted_msg","type":"Core.Case","config":{},"tags":[],"uuid":"5950c048-d5d0-5117-b188-2320b644c0e1","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"substitute(greeting_msg, \"{operator_name}\", \"@chat.assigned_to.name\")","config":{},"test":"","uuid":"089e4817-c270-4b40-9215-01a0d2c98151","destination_block":"12780c7d-5476-5f96-b823-2c94fde2b138","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"expression":{},"meta":{"column":3,"line":54},"type":"expression"},"index":0}}}}}},{"label":null,"name":"send_takeover_start_text","type":"MobilePrimitives.Message","config":{"prompt":"a27433e8-800b-4aae-8002-0244b61fbe8d"},"tags":[],"uuid":"12780c7d-5476-5f96-b823-2c94fde2b138","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"send_takeover_start_text","config":{},"test":"","uuid":"7fb131f8-0f64-41e8-be01-18fd8a69274d","destination_block":null,"semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":30},"name":"SendTakeoverStart","uuid":"438c0b97-60ae-54d6-873d-c865147ab98d"},"card_item":{"meta":{"column":3,"line":56},"text":{},"type":"text"},"index":0}}}}}},{"label":null,"name":"reroute_unassigned_log","type":"Core.Log","config":{"message":"29f81bc6-5fbd-4dfd-b54b-07ba7ba4c8a7"},"tags":[],"uuid":"682162bb-3dd1-5e74-b8ba-80fee84151d7","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"reroute_unassigned_log","config":{},"test":"","uuid":"5f9f688f-60bf-4e21-b9b5-5877e36e38ac","destination_block":null,"semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":59},"name":"RerouteUnassigned","uuid":"a0a4ad5a-7d7b-5248-b8bf-748dbe419592"},"card_item":{"log":{},"meta":{"column":3,"line":61},"type":"log"},"index":0}}}}}},{"label":null,"name":"check_status_case","type":"Core.Case","config":{},"tags":[],"uuid":"e8f2f5d3-5d9e-5268-bdb2-d960bea5a0df","ui_metadata":{},"exits":[{"default":false,"name":"Exit for check_status_case_condition_0","config":{},"test":"is_nil_or_empty(chat.assigned_to)","uuid":"abd6f6cd-c2c9-41a6-944b-fc9b0c40c37b","destination_block":"65166bda-99ae-5085-9586-5a095b7a84a7","semantic_label":null,"vendor_metadata":{}},{"default":true,"name":"Exit for check_status_case_condition_1","config":{},"test":null,"uuid":"f7722a24-465f-4193-81f5-ce7c1f464630","destination_block":"7d57a046-3f75-5f0e-877e-33f6347ebe72","semantic_label":null,"vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{}},{"label":null,"name":"check_status_case_condition_1_log","type":"Core.Log","config":{"message":"c233bca0-2919-41c5-b847-4c4a26936b31"},"tags":[],"uuid":"7d57a046-3f75-5f0e-877e-33f6347ebe72","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"Default exit to \"SendTakeoverStart\"","config":{},"test":"","uuid":"4be87482-0cd1-4842-b49d-0ca38134128a","destination_block":"c350b218-00f2-516c-89ea-a984ad8e2f72","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":26},"name":"CheckStatus","uuid":"f86fa7a1-92cc-55e3-985c-40fd1cac62c4"},"card_item":{"log":{},"meta":{"column":3,"line":27},"type":"log"},"index":1}}}}}},{"label":null,"name":"check_status_case_condition_0_text","type":"MobilePrimitives.Message","config":{"prompt":"81a746cb-2048-4e0d-886f-80c0e37858d3"},"tags":[],"uuid":"65166bda-99ae-5085-9586-5a095b7a84a7","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"Default exit to \"RerouteUnassigned\"","config":{},"test":"","uuid":"98375aba-40dc-4cb1-94d8-32c98d722086","destination_block":"682162bb-3dd1-5e74-b8ba-80fee84151d7","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":"is_nil_or_empty(chat.assigned_to)","meta":{"column":1,"line":22},"name":"CheckStatus","uuid":"e8f2f5d3-5d9e-5268-bdb2-d960bea5a0df"},"card_item":{"meta":{"column":3,"line":23},"text":{},"type":"text"},"index":0}}}}}},{"label":null,"name":"get_latest_msg","type":"Io.Turn.Webhook","config":{"timeout":5000,"mode":"sync","body":null,"query":[],"url":"https://whatsapp-praekelt-cloud.turn.io/v1/contacts/@contact.whatsapp_id/messages","headers":[["Authorization","Bearer @global.settings.turn_qa_token"],["Accept","application/vnd.v1+json"],["Content-Type","application/json"]],"method":"GET","cache_ttl":60000},"tags":[],"uuid":"d632dfd9-31d5-5680-b3f2-2800478ffcd6","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"get_latest_msg","config":{},"test":"","uuid":"bb573e73-8837-4a15-9d09-58dbf5e92ed7","destination_block":"8a9dea5b-ee5e-5350-a7b5-a9b1a4a1cf9a","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":3},"name":"GetLatestMessage","uuid":"3773923e-6edb-52ce-a9f3-fb40e2920783"},"card_item":{"meta":{"column":3,"line":4},"type":"webhook","webhook":{}},"index":0}}}}}},{"label":null,"name":"chat","type":"Core.Case","config":{},"tags":[],"uuid":"8a9dea5b-ee5e-5350-a7b5-a9b1a4a1cf9a","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"get_latest_msg.body.chat","config":{},"test":"","uuid":"68e64ed7-cdc2-444f-8658-8245885d6e36","destination_block":"e8f2f5d3-5d9e-5268-bdb2-d960bea5a0df","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":3},"name":"GetLatestMessage","uuid":"3773923e-6edb-52ce-a9f3-fb40e2920783"},"card_item":{"expression":{},"meta":{"column":3,"line":19},"type":"expression"},"index":0}}}}}}],"last_modified":"2024-08-27T09:02:37.169388Z","uuid":"3881c58c-0038-4941-a117-affc87ce40cc","languages":[{"id":"d776d8c5-66a8-4d35-b248-f2d31c8f3abc","label":"English","variant":null,"bcp_47":null,"iso_639_3":"eng"}],"interaction_timeout":300,"first_block_id":"d632dfd9-31d5-5680-b3f2-2800478ffcd6","vendor_metadata":{},"supported_modes":["RICH_MESSAGING"],"exit_block_id":""}],"vendor_metadata":{},"specification_version":"1.0.0-rc3"}